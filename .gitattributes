# -*- mode: gitattributes; -*-
# .gitattributes — repository attributes and export rules
#
# Goals:
# 1) Normalize text files (LF) to reduce cross-platform noise.
# 2) Treat editor-managed or environment-provisioned symlinks as local-only:
#    - Prefer ignoring them at the .gitignore level where possible.
#    - If they are tracked or reappear transiently, exclude them from `git archive`
#      and source exports using `export-ignore` here.
#
# Notes:
# - `.gitattributes` cannot force “working-tree only” tracking. That behavior requires
#   index flags (e.g., skip-worktree) or keeping such paths untracked and ignored.
# - We still mark known ephemeral/symlink paths as `export-ignore` so archives/tarballs
#   and downstream consumers don’t receive broken links.
#
# ------------------------------------------------------------------------------
# 1) Core text normalization
# ------------------------------------------------------------------------------
* text=auto eol=lf

# Common textual types explicitly normalized to LF
*.sh     text eol=lf
*.zsh    text eol=lf
*.bash   text eol=lf
*.md     text eol=lf
*.org    text eol=lf
*.yml    text eol=lf
*.yaml   text eol=lf
*.json   text eol=lf
*.toml   text eol=lf
*.conf   text eol=lf
*.ini    text eol=lf
*.cfg    text eol=lf

# Treat common binary formats as binary (no EOL normalization, no text diffs)
*.png    binary
*.jpg    binary
*.jpeg   binary
*.gif    binary
*.ico    binary
*.pdf    binary
*.woff   binary
*.woff2  binary
*.ttf    binary
*.otf    binary
# SVG is XML text; keep normalized but allow diffs.
*.svg    text eol=lf

# ------------------------------------------------------------------------------
# 2) Editor-managed / environment-provisioned symlinks and plugin folders
#    Mark as export-ignore to keep archives/tarballs clean.
#    (These may be symlinks on disk or generated by tooling; exporting them
#     typically produces broken or meaningless artifacts.)
# ------------------------------------------------------------------------------

# Docker / Podman / other CLI plugin directories (environment-provisioned)
**/cli-plugins/** export-ignore

# Emacs straight.el / MELPA HTML build-status symlinks (editor-managed)
dot-config/emacs/.local/straight/repos/melpa/html-release/build-status.json   export-ignore -diff -merge
dot-config/emacs/.local/straight/repos/melpa/html-snapshot/build-status.json export-ignore -diff -merge
dot-config/emacs/.local/straight/repos/melpa/html-stable/build-status.json   export-ignore -diff -merge

# Historical/editor/tool symlink entry points (kept for resilience if reintroduced)
dot-config/vim/vim                export-ignore -diff -merge
dot-config/w3m/w3m                export-ignore -diff -merge
dot-config/gk/gk                  export-ignore -diff -merge
dot-config/mplayer/mplayer        export-ignore -diff -merge
dot-config/nvm/nvm                export-ignore -diff -merge
dot-config/otp/otp                export-ignore -diff -merge
dot-config/quokka/quokka          export-ignore -diff -merge
dot-config/redhat/redhat          export-ignore -diff -merge
dot-config/console-ninja/console-ninja export-ignore -diff -merge

# ------------------------------------------------------------------------------
# 3) Archives and exports
# ------------------------------------------------------------------------------
# Ignore repository housekeeping and local hooks in source exports
.githooks/         export-ignore
.gitignore         export-ignore
.gitmodules        export-ignore
.gitlab-ci.yml     export-ignore

# Keep CI workflows by default; comment out the next line to exclude them.
# .github/          export-ignore

# ------------------------------------------------------------------------------
# End
# ------------------------------------------------------------------------------
