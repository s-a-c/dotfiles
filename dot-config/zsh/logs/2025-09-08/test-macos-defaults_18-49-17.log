ğŸ§ª Testing Deferred macOS Defaults Execution System
==================================================
ğŸ“… Test Started: 2025-09-08T18:49:17Z
ğŸ“‹ Log File: /Users/s-a-c/.config/zsh/logs/2025-09-08/test-macos-defaults_18-49-17.log

1. Testing wrapper script existence and configuration...
   âŒ Wrapper script missing: /Users/s-a-c/.config/zsh/.zshrc.pre-plugins.d/03-macos-defaults-deferred.zsh
2. Testing first run behavior (no marker file)...
   ğŸ—‘ï¸  Removing existing marker file: /Users/s-a-c/.config/zsh/.macos-defaults-last-run
   ğŸ“¥ Sourcing wrapper function...
_test_first_run:source:11: no such file or directory: /Users/s-a-c/.config/zsh/.zshrc.pre-plugins.d/03-macos-defaults-deferred.zsh
   âŒ Marker file not created on first run
_test_first_run:24: no matches found: /Users/s-a-c/.config/zsh/logs/2025-09-08/deferred-macos-defaults_*.log
   âŒ No deferred execution log file found

3. Testing skip behavior (marker file exists and recent)...
   âš ï¸  Creating marker file for skip test
_test_skip_behavior:10: no matches found: /Users/s-a-c/.config/zsh/logs/2025-09-08/deferred-macos-defaults_*.log
   ğŸ“¥ Sourcing wrapper function (second time)...
_test_skip_behavior:source:14: no such file or directory: /Users/s-a-c/.config/zsh/.zshrc.pre-plugins.d/03-macos-defaults-deferred.zsh
_test_skip_behavior:17: no matches found: /Users/s-a-c/.config/zsh/logs/2025-09-08/deferred-macos-defaults_*.log
   âŒ No log file found for skip test

4. Testing script modification detection...
_test_modification_detection:source:12: no such file or directory: /Users/s-a-c/.config/zsh/.zshrc.pre-plugins.d/03-macos-defaults-deferred.zsh
   ğŸ“¥ Sourcing wrapper after script modification...
_test_modification_detection:15: no matches found: /Users/s-a-c/.config/zsh/logs/2025-09-08/deferred-macos-defaults_*.log
   âŒ No log file found for modification test

5. Testing startup time with deferred execution...
   ğŸ“Š Deferred execution time: 6ms
   âœ… Deferred execution is fast (< 100ms)

6. Testing log file organization...
   âœ… Date-named log directory exists: /Users/s-a-c/.config/zsh/logs/2025-09-08
_test_log_organization:13: no matches found: /Users/s-a-c/.config/zsh/logs/2025-09-08/deferred-macos-defaults_*.log
   âŒ No UTC-timestamped log files found

ğŸ Test Results Summary
======================
âœ… Tests Passed: 2
âŒ Tests Failed: 6
ğŸ“Š Total Tests: 8

âš ï¸  Some deferred macOS defaults tests failed
âŒ Task 2.1 needs attention
